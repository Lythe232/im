1. 连接模块 MQTTConnectionManager 
    连接建立与认证 自动重连 网络状态监听 心跳管理 连接状态回调
2. 消息处理 MessageProcessor
    消息编解码 消息去重 消息排序 离线消息处理 消息状态(发送中/已发送/已送达/已读)
3. 会话管理 ConversationManager
    会话列表维护 未读计数管理 会话置顶 会话搜索
4. 用户状态模块 UserStatusManager
    在线状态管理 输入状态显示 最后在线时间 用户信息缓存
5. 消息发送流程
   UI输入 → ViewModel验证 → Repository处理 → MQTT发送 → 状态更新 → UI反馈
6. 消息接收流程
   MQTT接收 → MessageProcessor解析 → 去重校验 → 存储数据库 → 通知UI更新 → 推送通知
7. 数据同步流程
   启动应用 → 检查本地数据 → 拉取服务器增量 → 合并数据 → 更新UI
//TODO
7. 离线处理策略
   消息队列
   发送队列：网络异常时缓存待发送消息

重试机制：失败消息自动重试

优先级管理：重要消息优先发送

数据同步
增量同步：只同步变更数据

冲突解决：时间戳优先策略

压缩传输：减少数据流量

8. 性能优化要点
   内存优化
   消息分页加载

图片缓存策略

对象复用池

电量优化
批量消息处理

智能心跳间隔

后台服务优化

网络优化
消息压缩

请求合并

缓存策略

9. 安全考虑
   数据传输
   TLS/SSL加密

消息内容加密

Token认证机制

数据存储
数据库加密

敏感信息保护

本地数据清理